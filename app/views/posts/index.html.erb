<% if @posts.any? %>
  <% @posts.each do |post| %>
    <div class="whitebox">
      <div class="post_header">
        <img src="/images/avatars/cat_temp_profile_pic.png" class="profile_pic" />
        <div class="petname_and_time">
          <a href="/<%= post.user.petname %>"><%= post.user.petname %></a><br>
          <span class="time_ago"><%= time_ago_in_words(post.created_at) + " ago" %><span>
        </div>
      </div>
      <% if post.image_file_name.nil? %>
        <h2 class="post_text"><%= post.text %></h2>
      <% else %>
        <h4 class="post_text"><%= post.text %></h4>
        <a href="<%= post_path(post) %>">
          <p class="post_image"><%= image_tag post.image.url(:medium) %></p>
        </a>
      <% end %>
      <% if post.comments.any? %>
        <% post.comments.each do |comment| %>
          <div class="">
            <a href="/<%= comment.user.petname %>"> <%= comment.user.petname %></a>:
            <%= comment.comments %> <br/>
            <%= time_ago_in_words(comment.created_at) + " ago" %>
            <%= link_to "Like", new_comment_comment_like_path(comment), class: 'comment-likes-link' %>
            <span class="comment_likes_count"> <%= comment.comment_likes.count %> </span> <%= 'like'.pluralize(comment.comment_likes.count) %>
            <%= link_to "Edit", edit_post_comment_url(comment.post.id, comment.id) %>
            <%= link_to "Delete", post_comment_path(comment.post.id, comment.id), method: :delete %>
          <div>
        <% end %>
      <% end %>
      <div class="react_and_comment">
        <%= link_to "Like", post_likes_path(post), class: 'likes-link' %> |
        <span class="likes_count"> <%= post.likes.count %> </span> <%= 'like'.pluralize(post.likes.count) %> |
        <%= link_to "Edit", edit_post_url(post.id) %> |
        <%= link_to "Delete", post_path(post), method: :delete %> |
        <%= link_to "Comments", new_post_comment_path(post.id) %>
      </div>
    </div>
  <% end %>
<% else %>
  <h2>No posts</h2>
<% end %>
